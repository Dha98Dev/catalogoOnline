<!-- BOTÓN FLOTANTE WHATSAPP -->
<!-- <div class="fixed bottom-[30px] right-[30px] z-[999] border rounded-full bg-white">
  <p-button
    icon="pi pi-whatsapp"
    variant="outlined"
    [rounded]="true"
    [raised]="true"
    size="large"
    (onClick)="openWhatsappChat()">
  </p-button>
</div> -->

<!-- MINI MODAL TIPO CHATBOT -->
<p-dialog
  [(visible)]="whatsappChatVisible"
  [modal]="false"
  [position]="'bottomright'"
  [style]="{ width: '320px' }"
  [draggable]="false"
  [resizable]="false"
  [dismissableMask]="true"
  styleClass="wa-chat-dialog">

  <!-- Header tipo chat -->
  <ng-template #header>
    <div class="flex items-center gap-2">
      <div class="w-8 h-8 rounded-full bg-emerald-500 flex items-center justify-center text-white text-sm">
        <i class="pi pi-whatsapp"></i>
      </div>
      <div class="flex flex-col">
        <span class="font-semibold text-sm">Asistencia por WhatsApp</span>
        <span class="text-xs text-gray-500">Te ayudamos con tu cotización</span>
      </div>
    </div>
  </ng-template>

  <!-- Cuerpo: burbuja de mensaje -->
  <div class="space-y-3">
    <div class="bg-emerald-50 rounded-2xl px-3 py-2 text-xs text-gray-700">
      <span class="font-semibold block mb-1">Mensaje sugerido</span>
      <p class="whitespace-pre-line">
        {{ whatsappMessage }}
      </p>
    </div>

    <!-- Si quieres permitir edición -->
    <!--
    <textarea
      pInputTextarea
      [(ngModel)]="whatsappMessage"
      rows="3"
      class="w-full text-sm"
      autoResize="true">
    </textarea>
    -->
  </div>

  <!-- Footer: acciones -->
  <ng-template #footer>
    <div class="flex justify-between items-center w-full">
      <button
        type="button"
        class="text-xs text-gray-500 hover:text-gray-700"
        (click)="whatsappChatVisible = false">
        Cerrar
      </button>

      <div class="flex gap-2">
        <p-button
          label="Copiar"
          size="small"
          variant="text"
          (onClick)="copyWhatsappMessage()">
        </p-button>

        <p-button
          label="Abrir WhatsApp"
          size="small"
          severity="success"
          (onClick)="goToWhatsapp()">
        </p-button>
      </div>
    </div>
  </ng-template>

</p-dialog>
